{% extends 'base.html' %}
{% load humanize %}

{% block content %}

    <section class="text-gray-600 body-font overflow-hidden">

        <!-- *** -->
        <div class="container px-5 py-24 mx-auto">

            <!-- *** -->
            <div class="flex flex-wrap -m-4">

                <!-- Probability of LBD -->
                {% if prediction %}
                    <div class="flex flex-col text-center w-full mb-10">
                        {% if prediction < 10 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full bg-green-500 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% elif prediction < 20 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full 300 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% elif prediction < 30 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full 200 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% elif prediction < 40 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full bg-yellow-100 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% elif prediction < 50 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full bg-yellow-200 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% elif prediction < 60 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full bg-yellow-300 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% elif prediction < 70 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full bg-red-100 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% elif prediction < 80 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full bg-red-200 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% elif prediction < 90 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full bg-red-300 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% elif prediction < 100 %}
                            <h1 class="sm:text-3xl text-2xl font-medium title-font rounded-full bg-red-400 text-gray-900 py-2">
                                Probability of LBD {{ prediction }}
                            </h1>
                        {% endif %}

                    </div>
                {% endif %}

                <!-- Examination sessions information -->
                <div class="flex flex-col text-center w-full mb-5">
                    <h1 class="sm:text-2xl text-2xl font-medium title-font text-gray-900">
                        Examination sessions
                    </h1>

                    <!-- Go to the list of subjects -->
                    <div class="mt-2">
                        <span class="text-sm">
                            go back to the
                            <a href="{% url 'subjects:subject_list' %}"
                               class="text-indigo-500">
                                list of subjects
                            </a>
                        </span>
                    </div>

                </div>

                {% if examination_sessions %}
                    {% for session in examination_sessions %}

                        <!-- Show existing examination sessions -->
                        <div class="p-4 md:w-1/3">
                            <div class="flex rounded-lg h-full bg-gray-100 p-8 flex-col items-center align-center text-center">
                                <div class="flex items-center mb-3">
                                    <div class="w-8 h-8 mr-3 inline-flex items-center justify-center rounded-full bg-indigo-500 text-white flex-shrink-0">
                                        <svg width="16"
                                             height="16"
                                             fill="currentColor"
                                             class="bi bi-bar-chart-fill"
                                             viewBox="0 0 16 16">
                                            <path d="M1 11a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3zm5-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2z"/>
                                        </svg>
                                    </div>
                                    {% if session.internal_prefix %}
                                        <h2 class="text-gray-900 text-lg title-font font-medium">
                                            Session #{{ session.session_number }} {{ session.internal_prefix }}
                                        </h2>
                                    {% else %}
                                        <h2 class="text-gray-900 text-lg title-font font-medium">
                                            Session #{{ session.session_number }}
                                        </h2>
                                    {% endif %}

                                </div>
                                <div class="flex-grow">
                                    {% if session.examined_on is not none %}
                                        <p class="leading-relaxed text-base">
                                            examined {{ session.examined_on|naturaltime }}
                                        </p>
                                    {% else %}
                                        <p class="leading-relaxed text-base">
                                            no date available
                                        </p>
                                    {% endif %}
                                    <a href="{% url 'subjects:session_detail' subject.code forloop.counter %}"
                                       class="mt-3 text-indigo-500 inline-flex items-center">
                                        View detail
                                        <svg fill="none"
                                             stroke="currentColor"
                                             stroke-linecap="round"
                                             stroke-linejoin="round"
                                             stroke-width="2"
                                             class="w-4 h-4 ml-2"
                                             viewBox="0 0 24 24">
                                            <path d="M5 12h14M12 5l7 7-7 7"></path>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>

                    {% endfor %}

                    <!-- No sessions information -->
                    <div class="flex flex-col text-center w-full mt-5 mb-4 text-gray-700">
                        <p class="font-medium">
                            Create new examination sessions
                        </p>
                    </div>

                    <!-- Create a new session -->
                    <div class="flex justify-center mx-auto">
                        <a href="{% url 'subjects:session_create' subject.code %}"
                           class="inline-flex text-white bg-indigo-500 border-0 py-2 px-3 focus:outline-none hover:bg-indigo-600 rounded">
                            Create a new session
                        </a>
                    </div>

                {% else %}

                    <!-- No sessions information -->
                    <div class="flex flex-col text-center w-full mt-5 mb-4 text-gray-700">
                        <p class="font-medium">There are no examination sessions so far</p>
                    </div>

                    <!-- Create a new session -->
                    <div class="flex justify-center mx-auto">
                        <a href="{% url 'subjects:session_create' subject.code %}"
                           class="inline-flex text-white bg-indigo-500 border-0 py-2 px-3 focus:outline-none hover:bg-indigo-600 rounded">
                            Create a new session
                        </a>
                    </div>
                {% endif %}
            </div>
        </div>
    </section>

{% endblock content %}