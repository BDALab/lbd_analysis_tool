{% extends 'base.html' %}

{% block content %}

    <section class="text-gray-600 body-font">
        <div class="container px-5 py-24 mx-auto flex flex-wrap flex-col">

            <!-- Examination information -->
            <div class="flex flex-col text-center w-full mb-5">
                <h1 class="sm:text-3xl text-2xl font-medium title-font text-gray-900">
                    Questionnaire data
                </h1>

                <!-- Go to the session detail -->
                <div class="mt-2">
                    <span class="text-sm">
                        go back to the
                        <a href="{% url 'subjects:session_detail' session.subject.code session.session_number %}"
                           class="text-indigo-500">
                            session detail
                        </a>
                    </span>
                </div>

            </div>

            <!-- Session data navbar -->
            <!-- <div class="flex mx-auto flex-wrap mb-5">

                <a href="{% url 'subjects:session_detail_data_acoustic' session.subject.code session.session_number %}" class="sm:px-6 py-3 w-1/2 sm:w-auto justify-center sm:justify-start border-b-2 title-font font-medium bg-gray-100 inline-flex items-center leading-none border-gray-700 text-gray-700 rounded-t transform hover:border-indigo-500 hover:bg-indigo-500 hover:text-white tracking-wider hover:scale-103">
                    <svg fill="none"
                         stroke="currentColor"
                         stroke-linecap="round"
                         stroke-linejoin="round"
                         stroke-width="2"
                         class="w-5 h-5 mr-3"
                         viewBox="0 0 24 24">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                    </svg>
                    Acoustic
                </a>

                <a class="sm:px-6 py-3 w-1/2 sm:w-auto justify-center sm:justify-start border-b-2 title-font font-medium inline-flex items-center leading-none border-indigo-600 bg-indigo-600 text-white tracking-wider rounded-t">
                    <svg fill="none"
                         stroke="currentColor"
                         stroke-linecap="round"
                         stroke-linejoin="round"
                         stroke-width="2"
                         class="w-5 h-5 mr-3"
                         viewBox="0 0 24 24">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    </svg>
                    Questionnaire
                </a>

                <a href="#" class="sm:px-6 py-3 w-1/2 sm:w-auto justify-center sm:justify-start border-b-2 title-font font-medium bg-gray-100 inline-flex items-center leading-none border-gray-700 text-gray-700 rounded-t transform hover:border-indigo-500 hover:bg-indigo-500 hover:text-white tracking-wider hover:scale-103">
                    <svg fill="none"
                         stroke="currentColor"
                         stroke-linecap="round"
                         stroke-linejoin="round"
                         stroke-width="2"
                         class="w-5 h-5 mr-3"
                         viewBox="0 0 24 24">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    </svg>
                    STEP 3
                </a>
                <a href="#" class="sm:px-6 py-3 w-1/2 sm:w-auto justify-center sm:justify-start border-b-2 title-font font-medium bg-gray-100 inline-flex items-center leading-none border-gray-700 text-gray-700 rounded-t transform hover:border-indigo-500 hover:bg-indigo-500 hover:text-white tracking-wider hover:scale-103">
                    <svg fill="none"
                         stroke="currentColor"
                         stroke-linecap="round"
                         stroke-linejoin="round"
                         stroke-width="2"
                         class="w-5 h-5 mr-3"
                         viewBox="0 0 24 24">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    </svg>
                    STEP 4
                </a>
                <a href="#" class="sm:px-6 py-3 w-1/2 sm:w-auto justify-center sm:justify-start border-b-2 title-font font-medium bg-gray-100 inline-flex items-center leading-none border-gray-700 text-gray-700 rounded-t transform hover:border-indigo-500 hover:bg-indigo-500 hover:text-white tracking-wider hover:scale-103">
                    <svg fill="none"
                         stroke="currentColor"
                         stroke-linecap="round"
                         stroke-linejoin="round"
                         stroke-width="2"
                         class="w-5 h-5 mr-3"
                         viewBox="0 0 24 24">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                    </svg>
                    STEP 5
                </a>

            </div> -->

            <!-- If there are any loaded questionnaire data, show the table -->
            {% if questionnaire_data %}
                <div class="mx-auto flex flex-wrap flex-col">
                    <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
                        <div class="py-2 align-middle inline-block mx-auto sm:px-6 lg:px-8">
                            <div class="my-10 shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">

                                <!-- Features table -->
                                <table class="sortable divide-y divide-gray-200">

                                    <!-- Table head -->
                                    <thead class="bg-gray-100">
                                        <tr>
                                            <th class="px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                                                scope="col">
                                                Question
                                            </th>
                                            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"
                                                scope="col">
                                                Response
                                            </th>
                                        </tr>
                                    </thead>

                                    <!-- Table body -->
                                    <tbody class="bg-white divide-y divide-gray-200">

                                        <!-- Questions and answers -->
                                        {% if is_paginated %}
                                            {% for item in page_obj.object_list %}
                                                <tr class="border-b border-gray-200 hover:bg-gray-100">
                                                    <td title="{{ item.title }}" class="px-6 py-4 whitespace-nowrap text-left text-sm text-gray-500">
                                                        {{ item.label }}
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">
                                                        {{ item.value }}
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        {% else %}
                                            {% for item in questionnaire_data %}
                                                <tr class="border-b border-gray-200 hover:bg-gray-100">
                                                    <td title="{{ item.title }}" class="px-6 py-4 whitespace-nowrap text-left text-sm text-gray-500">
                                                        {{ item.label }}
                                                    </td>
                                                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500">
                                                        {{ item.value }}
                                                    </td>
                                                </tr>
                                            {% endfor %}
                                        {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                {% if is_paginated %}
                    <div class="flex flex-col items-center my-5">
                        <div class="flex text-gray-700">

                            {% if page_obj.has_previous %}

                                 <!-- First page arrow -->
                                {% if page_obj.number|add:'-2' > 1 %}
                                    <div class="h-12 w-12 flex justify-center items-center rounded-full bg-gray-200 cursor-pointer transform hover:bg-indigo-500 hover:text-white hover:scale-105">
                                        <a href="?page=1">
                                            <svg width="100%"
                                                 height="100%"
                                                 fill="none"
                                                 viewBox="0 0 24 24"
                                                 stroke="currentColor"
                                                 stroke-width="2"
                                                 stroke-linecap="round"
                                                 stroke-linejoin="round"
                                                 class="feather feather-chevron-left w-6 h-6">
                                                <polyline points="15 18 9 12 15 6"></polyline>
                                            </svg>
                                        </a>
                                    </div>
                                {% endif %}

                                <!-- Previous pages three dots -->
                                {% if page_obj.number|add:'-3' > 1 %}
                                    <div class="h-12 w-12 flex justify-center items-center rounded-full bg-gray-200 cursor-pointer transform hover:bg-indigo-500 hover:text-white hover:scale-105">
                                        <a href="?page={{ page_obj.number|add:'-3' }}">
                                            <svg width="16"
                                                 height="16"
                                                 fill="currentColor"
                                                 class="bi bi-three-dots"
                                                 viewBox="0 0 16 16">
                                                <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                            </svg>
                                        </a>
                                    </div>
                                {% endif %}
                            {% endif %}

                            <!-- Pages -->
                            {% for i in paginator.page_range %}
                                <div class="flex h-12 font-medium rounded-full bg-gray-200">

                                    <!-- Selected page -->
                                    {% if page_obj.number == i %}
                                        <div class="w-12 md:flex justify-center items-center hidden leading-5 transition duration-150 ease-in rounded-full bg-indigo-600 text-white">
                                            {{ i }}
                                        </div>

                                    <!-- Surrounding pages -->
                                    {% elif i > page_obj.number|add:'-3' and i < page_obj.number|add:'3' %}
                                        <div class="w-12 md:flex justify-center items-center hidden cursor-pointer leading-5 transition duration-150 ease-in rounded-full transform hover:bg-indigo-500 hover:text-white hover:scale-105">
                                            <a href="?page={{ i }}">
                                                {{ i }}
                                            </a>
                                        </div>

                                    {% endif %}
                                </div>
                            {% endfor %}

                            {% if page_obj.has_next %}

                                <!-- Next pages three dots -->
                                {% if page_obj.paginator.num_pages > page_obj.number|add:'3' %}
                                    <div class="h-12 w-12 flex justify-center items-center rounded-full bg-gray-200 cursor-pointer transform hover:bg-indigo-500 hover:text-white hover:scale-105">
                                        <a href="?page={{ page_obj.number|add:'3' }}">
                                            <svg width="16"
                                                 height="16"
                                                 fill="currentColor"
                                                 class="bi bi-three-dots"
                                                 viewBox="0 0 16 16">
                                                <path d="M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                            </svg>
                                        </a>
                                    </div>
                                {% endif %}

                                <!-- Last page arrow -->
                                {% if page_obj.paginator.num_pages > page_obj.number|add:'2' %}
                                    <div class="h-12 w-12 flex justify-center items-center rounded-full bg-gray-200 cursor-pointer transform hover:bg-indigo-500 hover:text-white hover:scale-105">
                                        <a href="?page={{ page_obj.paginator.num_pages }}">
                                            <svg width="100%"
                                                 height="100%"
                                                 fill="none"
                                                 viewBox="0 0 24 24"
                                                 stroke="currentColor"
                                                 stroke-width="2"
                                                 stroke-linecap="round"
                                                 stroke-linejoin="round"
                                                 class="feather feather-chevron-right w-6 h-6">
                                                <polyline points="9 18 15 12 9 6"></polyline>
                                            </svg>
                                        </a>
                                    </div>
                                {% endif %}
                            {% endif %}

                        </div>
                    </div>

                {% endif %}

                <!-- Update data -->
                <div class="flex justify-center mx-auto mt-5 mb-4">
                    <a href="{% url 'subjects:session_update_data_questionnaire' session.subject.code session.session_number %}"
                       class="inline-flex text-white bg-indigo-500 border-0 py-2 px-3 mx-1 focus:outline-none hover:bg-indigo-600 rounded">
                        Update
                    </a>
                    <a href="{% url 'subjects:import_questionnaire_data' session.subject.code session.session_number %}"
                       class="inline-flex text-white bg-indigo-500 border-0 py-2 px-3 mx-1 focus:outline-none hover:bg-indigo-600 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             class="h-5 w-5 mr-1"
                             viewBox="0 0 20 20"
                             fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                        Import
                    </a>
                    <a href="{% url 'subjects:export_questionnaire_data' session.subject.code session.session_number %}"
                       class="inline-flex text-white bg-indigo-500 border-0 py-2 px-3 mx-1 focus:outline-none hover:bg-indigo-600 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             class="h-5 w-5 mr-1"
                             viewBox="0 0 20 20"
                             fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                        Export
                    </a>
                </div>

            {% else %}

                <!-- Create data information -->
                <div class="flex flex-col text-center w-full mt-5 mb-4 text-gray-700">
                    <p class="font-medium">There are no data so far</p>
                </div>

                <!-- Create data -->
                <div class="flex justify-center mx-auto">
                    <a href="{% url 'subjects:session_create_data_questionnaire' session.subject.code session.session_number %}"
                       class="inline-flex text-white bg-indigo-500 border-0 py-2 px-3 focus:outline-none hover:bg-indigo-600 rounded">
                        Fill manually
                    </a>
                    <a href="{% url 'subjects:import_questionnaire_data' session.subject.code session.session_number %}"
                       class="inline-flex text-white bg-indigo-500 border-0 py-2 px-3 mx-1 focus:outline-none hover:bg-indigo-600 rounded">
                        <svg xmlns="http://www.w3.org/2000/svg"
                             class="h-5 w-5 mr-1"
                             viewBox="0 0 20 20"
                             fill="currentColor">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                        Import
                    </a>
                </div>
            {% endif %}
        </div>
    </section>

{% endblock content %}